{% load request_utils %}

{% clone_query_dict request.GET as "params" %}

<div class="filterset" style="padding: 0.5em 0.1em;margin-top: 0.5em; min-height: 16px;background-color: #eee;">
    <form id="id_filterset_form" method="GET">
    <table>
      <thead>
	<tr>
	  {% for filter in filterset.form %}
	    <th>{{ filter.label }}</th>
	    {% endfor %}
	</tr>
      </thead>
      <tbody>
	<tr>
    {% for filter in filterset.form %}
        <td>{{ filter }}</td>
    {% endfor %}
    </tr>
      </tbody>
    </table>
    </form>
</div>

{# TODO: enable better dependency handling and loading of Javascript assets #}
<script type="text/javascript">
    $(document).ready(function() {
    $('#minmax, #closethis').click(function(){
        $('.filterset').toggle();})
    $("#id_filterset_form input,select").change(function() {
      $("#id_filterset_form").submit();
    });
  });
</script>
